{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"82ab08c4-8325-4b8b-b13f-66b515329a4f","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:2920","$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"welcome","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$position":{"top":"38px","left":"126px"},"$title":"In√≠cio","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"254a46a7-fa04-4200-87a9-20be15b2b811","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:26377"}],"$conditionOutputs":[{"stateId":"ad3b1851-9246-470c-a77e-952539f736f6","$connId":"con_3","conditions":[{"source":"input","comparison":"contains","values":["cancelar","cancela","n√£o quero","desistir"],"$$hashKey":"object:26591"}],"$invalid":false,"$$hashKey":"object:26583"},{"stateId":"a8c59231-bb49-4a25-a4e8-057b027c658e","$connId":"con_8","conditions":[{"source":"input","comparison":"contains","values":["menu","op√ß√µes","especie","opcoes","esp√©cie","cachorro","gato"],"$$hashKey":"object:26655"}],"$invalid":false,"$$hashKey":"object:26647"},{"stateId":"b160ad49-4c03-44b6-b312-b70d6bf4af3f","$connId":"con_13","conditions":[{"source":"input","comparison":"equals","values":["voltar"],"$$hashKey":"object:39301"},{"$$hashKey":"object:39333","source":"context","comparison":"equals","variable":"especie","values":["gato"]}],"$invalid":false,"$$hashKey":"object:39293"},{"stateId":"7e6dc365-a9b8-4201-9873-c8b1fa0339e5","$connId":"con_18","conditions":[{"source":"input","comparison":"equals","values":["voltar"],"$$hashKey":"object:40305"},{"$$hashKey":"object:40337","source":"context","comparison":"equals","variable":"especie","values":["cachorro"]}],"$invalid":false,"$$hashKey":"object:40297"},{"stateId":"error","conditions":[{"source":"input","comparison":"matches","values":[".*"],"$$hashKey":"object:26422"}],"$connId":"con_23","$invalid":false,"$$hashKey":"object:26403"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$position":{"top":"80px","left":"978px"},"$title":"Exce√ß√µes","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$$hashKey":"object:728","$invalid":false},{"action":{"type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Ol√°!!"},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Ol√°!!"},"editable":true,"deletable":true,"position":"left","editing":false}},"$$hashKey":"object:729","$invalid":false},{"action":{"type":"SendMessage","settings":{"id":"bc9f9d8a-ba55-485e-a814-916ee01bf6aa","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"bc9f9d8a-ba55-485e-a814-916ee01bf6aa","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:29328"},{"action":{"type":"SendMessage","settings":{"id":"cb39d061-ba03-47fa-91fb-f7066f3b80ba","type":"text/plain","content":"Bem-vindo(a) √† Petshop & Cl√≠nica Veterin√°ria"},"$cardContent":{"document":{"id":"cb39d061-ba03-47fa-91fb-f7066f3b80ba","type":"text/plain","content":"Bem-vindo(a) √† Petshop & Cl√≠nica Veterin√°ria"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:29329"},{"input":{"bypass":true,"$cardContent":{"document":{"id":"336fcc1e-5c16-4490-ad89-8c724018b83c","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:730","$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"type":"ProcessHttp","$title":"Requisicao oauth","$invalid":false,"settings":{"headers":{},"method":"POST","body":"{\n    \"client_secret\": \"1OU14K7iYtq6X1QOL8AGyKqe\",\n    \"grant_type\": \"refresh_token\",\n    \"refresh_token\": \"1/Nw3KMcw1YqbK86OaDNEA1bjyoVTLIhq4wqgB0Zm8wJ0\",  \n    \"client_id\": \"1086427021023-arh1ba5hrlqd9rmncl14bdpvi4oe82l6.apps.googleusercontent.com\"\n}","uri":"https://accounts.google.com/o/oauth2/token","responseBodyVariable":"oauth"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"a8c59231-bb49-4a25-a4e8-057b027c658e","$invalid":false},"$tags":[],"id":"welcome","$position":{"top":"176px","left":"123px"},"$title":"Boas vindas","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false,"$$hashKey":"object:28553"},{"action":{"type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"Desculpe, n√£o consegui entender!"},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"Desculpe, n√£o consegui entender!"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false,"$$hashKey":"object:28554"},{"input":{"bypass":true,"$cardContent":{"document":{"id":"8cd69536-87d8-4aa5-9de2-3ecfe829fef5","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:28555"}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"error","$position":{"top":"30.210500000000025px","left":"1196.0500000000002px"},"$title":"Erro padr√£o","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"a8c59231-bb49-4a25-a4e8-057b027c658e":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"dcdefe9e-a9cd-4ad9-a027-aeffd6ba67cb","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"dcdefe9e-a9cd-4ad9-a027-aeffd6ba67cb","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:5389"},{"action":{"type":"SendMessage","settings":{"id":"13300829-1fe3-4bce-9f4a-6963552f2b3f","type":"application/vnd.lime.select+json","content":{"text":"Qual √© a esp√©cie do seu pet?","scope":"immediate","options":[{"text":"Gato","previewText":"Gato","value":"gato","index":0,"type":"plain/text"},{"text":"Cachorro","previewText":"Cachorro","value":"cao","index":1,"type":"plain/text"}]}},"$cardContent":{"document":{"id":"13300829-1fe3-4bce-9f4a-6963552f2b3f","type":"application/vnd.lime.select+json","content":{"text":"Qual √© a esp√©cie do seu pet?","scope":"immediate","options":[{"text":"Gato","previewText":"Gato","value":"gato","index":0,"type":"plain/text"},{"text":"Cachorro","previewText":"Cachorro","value":"cao","index":1,"type":"plain/text"}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:5390"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"25ebed0b-0e15-4148-ad8c-6c5ac389ba4c","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:3543","$invalid":false}],"$conditionOutputs":[{"stateId":"b160ad49-4c03-44b6-b312-b70d6bf4af3f","$connId":"con_28","conditions":[{"source":"input","comparison":"equals","values":["gato","gatinho","bichano","cat"],"$$hashKey":"object:19264"}],"$invalid":false,"$$hashKey":"object:19255"},{"stateId":"7e6dc365-a9b8-4201-9873-c8b1fa0339e5","$connId":"con_33","conditions":[{"source":"input","comparison":"contains","values":["cao","cachorro","dog","doguinho"],"$$hashKey":"object:19419"}],"$invalid":false,"$$hashKey":"object:19411"},{"stateId":"ad3b1851-9246-470c-a77e-952539f736f6","$connId":"con_38","conditions":[{"source":"input","comparison":"contains","values":["voltar","sair","cancelar"],"$$hashKey":"object:19583"}],"$invalid":false,"$$hashKey":"object:19575"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["gato","cao"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"a8c59231-bb49-4a25-a4e8-057b027c658e","root":false,"$title":"1. Esp√©cie  üê± üê∂","$position":{"top":"84px","left":"639px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"b160ad49-4c03-44b6-b312-b70d6bf4af3f":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"f0591865-4e8b-47c0-aa3b-4e79f989f8d1","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"f0591865-4e8b-47c0-aa3b-4e79f989f8d1","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:2644"},{"action":{"type":"SendMessage","settings":{"id":"0f98a35e-4984-4646-be86-9819f5aea9c2","type":"text/plain","content":"Qual de nossos servi√ßos voc√™ procura?"},"$cardContent":{"document":{"id":"0f98a35e-4984-4646-be86-9819f5aea9c2","type":"text/plain","content":"Qual de nossos servi√ßos voc√™ procura?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:2645"},{"action":{"type":"SendMessage","settings":{"id":"078bdb23-817a-403e-a614-64751cbf872e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"078bdb23-817a-403e-a614-64751cbf872e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:1325"},{"action":{"type":"SendMessage","settings":{"id":"536840e8-5b23-422a-ab6c-2a748a9b1956","type":"application/vnd.lime.collection+json","content":{"itemType":"application/vnd.lime.document-select+json","items":[{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Banho & Tosa","text":"Para deixar seu bichano cheirosinho e estiloso","type":"image/webp","uri":"https://i.giphy.com/media/13VfgGFlFM1oxa/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"banho"}}],"id":0,"editing":false},{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Consultas & Exames","text":"Para cuidar da sa√∫de do seu bichano","type":"image/webp","uri":"https://i.giphy.com/media/FvMbYrlJhcEY8/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"consulta"}}],"id":1,"editing":false}]}},"$cardContent":{"document":{"id":"536840e8-5b23-422a-ab6c-2a748a9b1956","type":"application/vnd.lime.collection+json","content":{"itemType":"application/vnd.lime.document-select+json","items":[{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Banho & Tosa","text":"Para deixar seu bichano cheirosinho e estiloso","type":"image/webp","uri":"https://i.giphy.com/media/13VfgGFlFM1oxa/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"banho"}}],"id":0,"editing":false},{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Consultas & Exames","text":"Para cuidar da sa√∫de do seu bichano","type":"image/webp","uri":"https://i.giphy.com/media/FvMbYrlJhcEY8/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"consulta"}}],"id":1,"editing":false}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:5609"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"61b58241-4375-42e3-b6b2-54326b13e843","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:24152","$invalid":false}],"$conditionOutputs":[{"conditions":[{"source":"input","comparison":"contains","values":["{\"type\":\"plain/text\",\"value\":\"banho\"}","banho","tosa","corte","pelos","limpeza"],"$$hashKey":"object:8636"}],"$invalid":false,"$$hashKey":"object:8627","stateId":"cbf4bc9a-7ec1-4810-86ad-92aa2f0fc968","$connId":"con_43"},{"stateId":"30f97600-3fc5-4cb0-949c-a02a0bcda800","$connId":"con_48","conditions":[{"source":"input","comparison":"contains","values":["{\"type\":\"plain/text\",\"value\":\"consulta\"}","consulta","medico","veterinario","remedio","exames","doente","resultado"],"$$hashKey":"object:1200"}],"$invalid":false,"$$hashKey":"object:1192"}],"$enteringCustomActions":[],"$leavingCustomActions":[{"type":"SetVariable","$title":"Definir vari√°vel","$invalid":false,"settings":{"variable":"especie","value":"gato"},"conditions":[]}],"$inputSuggestions":["{\"type\":\"plain/text\",\"value\":\"banho\"}","{\"type\":\"plain/text\",\"value\":\"consulta\"}"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"b160ad49-4c03-44b6-b312-b70d6bf4af3f","root":false,"$title":"2. 1 üê± Servi√ßos","$position":{"top":"314px","left":"535px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"7e6dc365-a9b8-4201-9873-c8b1fa0339e5":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"663282db-dd1e-4f81-9ba6-963b7850f099","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"663282db-dd1e-4f81-9ba6-963b7850f099","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:3022"},{"action":{"type":"SendMessage","settings":{"id":"ebac2d52-c7be-4aa4-96ba-ae76993959a4","type":"text/plain","content":"Qual de nossos servi√ßos voc√™ procura?"},"$cardContent":{"document":{"id":"ebac2d52-c7be-4aa4-96ba-ae76993959a4","type":"text/plain","content":"Qual de nossos servi√ßos voc√™ procura?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:12706"},{"action":{"type":"SendMessage","settings":{"id":"fc83a010-21f2-4e68-85e4-2d9facfde2d2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"fc83a010-21f2-4e68-85e4-2d9facfde2d2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:12705"},{"action":{"type":"SendMessage","settings":{"id":"68aa68f0-af7a-4d8f-9d73-fec66ab21da6","type":"application/vnd.lime.collection+json","content":{"itemType":"application/vnd.lime.document-select+json","items":[{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Banho & Tosa","text":"Que tal dar um tapa no visual do seu c√£ozinho?","type":"image/webp","uri":"https://i.giphy.com/media/QBYNLQ29AM97a/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"banho"}}],"id":0,"editing":false},{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Consultas & Exames","text":"Deixe a sa√∫de do seu c√£o na m√£o de especialistas","type":"image/webp","uri":"https://i.giphy.com/media/zxa07WvFbFffq/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"consulta"}}],"id":1,"editing":false}]}},"$cardContent":{"document":{"id":"68aa68f0-af7a-4d8f-9d73-fec66ab21da6","type":"application/vnd.lime.collection+json","content":{"itemType":"application/vnd.lime.document-select+json","items":[{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Banho & Tosa","text":"Que tal dar um tapa no visual do seu c√£ozinho?","type":"image/webp","uri":"https://i.giphy.com/media/QBYNLQ29AM97a/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"banho"}}],"id":0,"editing":false},{"header":{"type":"application/vnd.lime.media-link+json","value":{"title":"Consultas & Exames","text":"Deixe a sa√∫de do seu c√£o na m√£o de especialistas","type":"image/webp","uri":"https://i.giphy.com/media/zxa07WvFbFffq/giphy.webp","aspectRatio":"2:1"}},"options":[{"label":{"type":"text/plain","value":"Selecionar"},"value":{"type":"plain/text","value":"consulta"}}],"id":1,"editing":false}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:3023"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"51677925-e4ae-4caf-b13f-d090efd9ca11","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:27484","$invalid":false}],"$conditionOutputs":[{"stateId":"cbf4bc9a-7ec1-4810-86ad-92aa2f0fc968","$connId":"con_53","conditions":[{"source":"input","comparison":"contains","values":["{\"type\":\"plain/text\",\"value\":\"banho\"}","corte","pelo","aparar","cortar","pentear","limpar","banho"],"$$hashKey":"object:4879"}],"$invalid":false,"$$hashKey":"object:4870"},{"stateId":"30f97600-3fc5-4cb0-949c-a02a0bcda800","$connId":"con_58","conditions":[{"source":"input","comparison":"contains","values":["{\"type\":\"plain/text\",\"value\":\"consulta\"}","veterinario","doente","machuado","remedio","exames","resultado","medico","consulta"],"$$hashKey":"object:7121"}],"$invalid":false,"$$hashKey":"object:7113"}],"$enteringCustomActions":[],"$leavingCustomActions":[{"type":"SetVariable","$title":"Definir vari√°vel","$invalid":false,"settings":{"variable":"especie","value":"cachorro"},"conditions":[]}],"$inputSuggestions":["{\"type\":\"plain/text\",\"value\":\"banho\"}","{\"type\":\"plain/text\",\"value\":\"consulta\"}"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"7e6dc365-a9b8-4201-9873-c8b1fa0339e5","root":false,"$title":"2.2 üê∂ Servi√ßos","$position":{"top":"312px","left":"751px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"26f67df8-5b4a-4951-a6c5-e70d5e0063ca":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"fbfb83ef-92ba-4c45-bd87-7c1d33f3a4e8","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:25986","$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"type":"SetVariable","$title":"Definir vari√°vel: colorid gato","$invalid":false,"settings":{"variable":"colorId","value":"2"},"conditions":[{"$$hashKey":"object:12378","source":"context","comparison":"equals","variable":"especie","values":["gato"]}]},{"type":"SetVariable","$title":"Definir vari√°vel: colorid dog","$invalid":false,"settings":{"variable":"colorId","value":"9"},"conditions":[{"$$hashKey":"object:13665","source":"context","comparison":"equals","variable":"especie","values":["cachorro"]}]}],"$leavingCustomActions":[{"type":"ProcessHttp","$title":"Agendar","$invalid":false,"settings":{"headers":{"Authorization":"Bearer {{oauth@access_token}}"},"method":"POST","body":"{\n  \"end\": {\n    \"dateTime\": \"{{dataFormatada}}T{{horarioFinal}}:00:00-03:00\"\n  },\n  \"start\": {\n    \"dateTime\": \"{{dataFormatada}}T{{horario}}:00:00-03:00\"\n  },\n  \"summary\": \"{{servico}}: {{nomeAnimal}} - {{especie}}\",\n  \"colorId\": \"{{colorId}}\"\n}","uri":"https://www.googleapis.com/calendar/v3/calendars/{{config.calendarId}}/events?sendUpdates=all","responseStatusVariable":"status","responseBodyVariable":"response"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"ad3b1851-9246-470c-a77e-952539f736f6","$invalid":false},"$tags":[],"id":"26f67df8-5b4a-4951-a6c5-e70d5e0063ca","root":false,"$title":"Agendar","$position":{"top":"670px","left":"531px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"cbf4bc9a-7ec1-4810-86ad-92aa2f0fc968":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"9ef352f5-df1d-44ea-a2dc-b3bee8f13aa4","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"9ef352f5-df1d-44ea-a2dc-b3bee8f13aa4","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:16337"},{"action":{"type":"SendMessage","settings":{"id":"201cae48-44bd-4077-b15a-9f83eff8dd62","type":"text/plain","content":"{{valorBanho}}"},"$cardContent":{"document":{"id":"201cae48-44bd-4077-b15a-9f83eff8dd62","type":"text/plain","content":"{{valorBanho}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:16338"},{"action":{"type":"SendMessage","settings":{"id":"bb56c8f8-96da-4daf-af81-dad10c48d75c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"bb56c8f8-96da-4daf-af81-dad10c48d75c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:16814"},{"action":{"type":"SendMessage","settings":{"id":"05bacc65-fc0a-462b-a685-5a0fe68b2114","type":"application/vnd.lime.select+json","content":{"text":"Gostaria de continuar?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"text":"N√£o","previewText":"N√£o","value":null,"index":1,"type":null}]}},"$cardContent":{"document":{"id":"05bacc65-fc0a-462b-a685-5a0fe68b2114","type":"application/vnd.lime.select+json","content":{"text":"Gostaria de continuar?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"text":"N√£o","previewText":"N√£o","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:16815"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"124ac2e9-bfb6-4546-b73f-2ec42b9a4bf6","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:28946","$invalid":false}],"$conditionOutputs":[{"stateId":"6e5d5eec-19c6-4232-b227-1147ef23b231","$connId":"con_63","conditions":[{"source":"input","comparison":"equals","values":["Sim"],"$$hashKey":"object:29778"}],"$invalid":false,"$$hashKey":"object:29769"},{"stateId":"b160ad49-4c03-44b6-b312-b70d6bf4af3f","$connId":"con_68","conditions":[{"source":"input","comparison":"equals","values":["N√£o"],"$$hashKey":"object:29843"},{"$$hashKey":"object:29900","source":"context","comparison":"equals","variable":"especie","values":["gato"]}],"$invalid":false,"$$hashKey":"object:29835"},{"stateId":"7e6dc365-a9b8-4201-9873-c8b1fa0339e5","$connId":"con_73","conditions":[{"source":"input","comparison":"equals","values":["N√£o"],"$$hashKey":"object:30785"},{"$$hashKey":"object:30842","source":"context","comparison":"equals","variable":"especie","values":["cachorro"]}],"$invalid":false,"$$hashKey":"object:30777"}],"$enteringCustomActions":[{"type":"ExecuteScript","$title":"Executar script","$invalid":false,"settings":{"function":"run","source":"/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(especie) {\n                switch(especie){\n                    case \"gato\":\n                        return \"O valor para o banho de gatos √© R$45.00\";\n                        break;\n                    case \"cachorro\":\n                        return \"O valor para o banho de c√£es √© R$ 30.00.\"\n                        break;\n                    default:\n                        return \"\";\n                        break;\n                }\n            }","inputVariables":["especie"],"outputVariable":"valorBanho"},"conditions":[]}],"$leavingCustomActions":[{"type":"SetVariable","$title":"Definir vari√°vel","$invalid":false,"settings":{"variable":"servico","value":"Banho & Tosa"},"conditions":[]}],"$inputSuggestions":["Sim","N√£o"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"cbf4bc9a-7ec1-4810-86ad-92aa2f0fc968","root":false,"$title":"3.1 üöø Banho/Tosa","$position":{"top":"499px","left":"534px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"30f97600-3fc5-4cb0-949c-a02a0bcda800":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"a2444633-1efb-4132-a164-417941c6853a","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"a2444633-1efb-4132-a164-417941c6853a","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:10521"},{"action":{"type":"SendMessage","settings":{"id":"a856093c-1c4d-4122-94f7-0f01a5d8d58b","type":"text/plain","content":"{{valorConsulta}}"},"$cardContent":{"document":{"id":"a856093c-1c4d-4122-94f7-0f01a5d8d58b","type":"text/plain","content":"{{valorConsulta}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:10522"},{"action":{"type":"SendMessage","settings":{"id":"9f62b049-0a86-464f-889f-06d252134bc0","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"9f62b049-0a86-464f-889f-06d252134bc0","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:34306"},{"action":{"type":"SendMessage","settings":{"id":"5e038e02-9452-4d0b-b879-63cca520ddba","type":"application/vnd.lime.select+json","content":{"text":"Gostaria de continuar?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"text":"N√£o","previewText":"N√£o","value":null,"index":1,"type":null}]}},"$cardContent":{"document":{"id":"5e038e02-9452-4d0b-b879-63cca520ddba","type":"application/vnd.lime.select+json","content":{"text":"Gostaria de continuar?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"text":"N√£o","previewText":"N√£o","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:34307"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"b463d881-ca2f-463c-b58f-8a0ec50eed13","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:29326","$invalid":false}],"$conditionOutputs":[{"stateId":"6e5d5eec-19c6-4232-b227-1147ef23b231","$connId":"con_78","conditions":[{"source":"input","comparison":"equals","values":["Sim"],"$$hashKey":"object:34335"}],"$invalid":false,"$$hashKey":"object:34326"},{"stateId":"b160ad49-4c03-44b6-b312-b70d6bf4af3f","$connId":"con_83","conditions":[{"source":"input","comparison":"equals","values":["N√£o"],"$$hashKey":"object:34400"},{"$$hashKey":"object:34457","source":"context","comparison":"equals","variable":"especie","values":["gato"]}],"$invalid":false,"$$hashKey":"object:34392"},{"stateId":"7e6dc365-a9b8-4201-9873-c8b1fa0339e5","$connId":"con_88","conditions":[{"source":"input","comparison":"equals","values":["N√£o"],"$$hashKey":"object:35342"},{"$$hashKey":"object:35399","source":"context","comparison":"equals","variable":"especie","values":["cachorro"]}],"$invalid":false,"$$hashKey":"object:35334"}],"$enteringCustomActions":[{"type":"ExecuteScript","$title":"Executar script","$invalid":false,"settings":{"function":"run","source":"/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(especie) {\n                switch(especie){\n                    case \"gato\":\n                        return \"O valor para consultas de gatos √© R$150.00\";\n                        break;\n                    case \"cachorro\":\n                        return \"O valor para o consultas de c√£es √© R$100.00.\"\n                        break;\n                    default:\n                        return \"O valor das consultas √© R$200.00.\";\n                        break;\n                }\n            }","inputVariables":["especie"],"outputVariable":"valorConsulta"},"conditions":[]}],"$leavingCustomActions":[{"type":"SetVariable","$title":"Definir vari√°vel","$invalid":false,"settings":{"variable":"servico","value":"Consulta & Exame"},"conditions":[]}],"$inputSuggestions":["Sim","N√£o"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"30f97600-3fc5-4cb0-949c-a02a0bcda800","root":false,"$title":"3.2üíâ Consultas","$position":{"top":"501px","left":"761px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"ad3b1851-9246-470c-a77e-952539f736f6":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"ac7fdd25-4f79-417a-8e84-c0067bf292fc","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"ac7fdd25-4f79-417a-8e84-c0067bf292fc","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:25609"},{"action":{"type":"SendMessage","settings":{"id":"5447844a-44bb-4420-88df-1858e48fa25f","type":"text/plain","content":"Obrigado por escolher a Petshop Petshop e Cl√≠nica Veterin√°ria! "},"$cardContent":{"document":{"id":"5447844a-44bb-4420-88df-1858e48fa25f","type":"text/plain","content":"Obrigado por escolher a Petshop Petshop e Cl√≠nica Veterin√°ria! "},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:25610"},{"input":{"bypass":true,"$cardContent":{"document":{"id":"ecff496b-1438-43e7-8b18-dc87548418e9","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false,"$$hashKey":"object:25293"}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"ad3b1851-9246-470c-a77e-952539f736f6","root":false,"$title":"Finaliza√ß√£o","$position":{"top":"375px","left":"127px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"6e5d5eec-19c6-4232-b227-1147ef23b231":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"b518f975-a2ee-494c-b037-59c8b1612502","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"b518f975-a2ee-494c-b037-59c8b1612502","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:10954"},{"action":{"type":"SendMessage","settings":{"id":"a518dc20-1d8a-40e3-8c36-c68bb96cc5ed","type":"text/plain","content":"Pra qual dia voc√™ gostaria de agendar {{servico}}?"},"$cardContent":{"document":{"id":"a518dc20-1d8a-40e3-8c36-c68bb96cc5ed","type":"text/plain","content":"Pra qual dia voc√™ gostaria de agendar {{servico}}?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:10955"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"44513914-3386-48b8-bf4f-85bf95a0c53d","type":"text/plain","textContent":"Entrada do usu√°rio","content":"data"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"validation":{"rule":"regex","regex":"^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$","error":"Por favor informe uma data no formato \"DD/MM/AAAA\""},"variable":"data"},"$$hashKey":"object:10416","$invalid":false}],"$conditionOutputs":[{"stateId":"b50a5331-4ddc-4465-b23a-d00be1b86dfd","$connId":"con_93","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:15666"}],"$invalid":false,"$$hashKey":"object:15657"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"6e5d5eec-19c6-4232-b227-1147ef23b231","root":false,"$title":"4. üìÖ Definir Data","$position":{"top":"177px","left":"1338px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"b50a5331-4ddc-4465-b23a-d00be1b86dfd":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"cb4525ef-561d-4a88-a6b7-8dc9a806a4d8","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:13514","$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"type":"ExecuteScript","$title":"formata data","$invalid":false,"settings":{"function":"run","source":"/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\nfunction run(data) {\n    var dataFormatada = data.split(\"/\").reverse().join(\"-\");\n    return dataFormatada;\n}","inputVariables":["data"],"outputVariable":"dataFormatada"},"conditions":[]}],"$leavingCustomActions":[{"type":"ProcessHttp","$title":"Lista de horarios","$invalid":false,"settings":{"headers":{"Authorization":"Bearer {{oauth@access_token}}","Accept":"application/json","Content-Type":"application/json"},"method":"POST","uri":"https://www.googleapis.com/calendar/v3/freeBusy?key={{config.apiKey}}","responseBodyVariable":"listaDeHorarios","body":"{\n  \"timeMin\": \"{{dataFormatada}}T08:00:00{{config.timeOffset}}:00\",\n  \"timeMax\": \"{{dataFormatada}}T19:59:59{{config.timeOffset}}:00\",\n  \"items\": [\n    {\n      \"id\": \"{{config.calendarId}}\"\n    }\n  ],\n  \"groupExpansionMax\": 1,\n  \"calendarExpansionMax\": 1,\n  \"timeZone\": \"America/Sao_Paulo\"\n}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"f3fd011f-7775-427a-9c22-8036f088acbc","$invalid":false},"$tags":[],"id":"b50a5331-4ddc-4465-b23a-d00be1b86dfd","root":false,"$title":"5. üìÖ Verifica hor√°rios","$position":{"top":"327px","left":"1342px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"352346fe-f25c-4750-8c67-ce1ff31524ce":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"5c8c1fb6-f4d2-407d-ac58-64aab774f6b8","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"5c8c1fb6-f4d2-407d-ac58-64aab774f6b8","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:3864"},{"action":{"type":"SendRawMessage","settings":{"metadata":{},"type":"text/plain","rawContent":"Os hor√°rios dispon√≠veis para a data {{data}} s√£o:\n{{options}}"}},"$invalid":false,"$$hashKey":"object:3865"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"4ab3ae9e-4b49-4363-bd22-d4757b6261b2","type":"text/plain","textContent":"Entrada do usu√°rio","content":"horario"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"horario","validation":{"rule":"number","error":"Informe apenas os n√∫meros do hor√°rio (sem o h)."}},"$$hashKey":"object:25312","$invalid":false}],"$conditionOutputs":[{"stateId":"e9b02a2b-3ce3-4266-a9a1-72b14188902a","$connId":"con_98","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:17323"}],"$invalid":false,"$$hashKey":"object:17314"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"352346fe-f25c-4750-8c67-ce1ff31524ce","root":false,"$title":"6.1 üìÖ Exibe hor√°rios","$position":{"top":"528px","left":"1226px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1b8121c2-4df2-40ff-bf78-7e74caa1524f":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"cb44abd3-1200-4b6f-901a-c94a5600d373","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"cb44abd3-1200-4b6f-901a-c94a5600d373","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:12806"},{"action":{"type":"SendMessage","settings":{"id":"72f67e52-86e6-4c90-8c65-2712768b505f","type":"text/plain","content":"Desculpe! N√£o temos hor√°rios dispon√≠veis para o dia {{data}}."},"$cardContent":{"document":{"id":"72f67e52-86e6-4c90-8c65-2712768b505f","type":"text/plain","content":"Desculpe! N√£o temos hor√°rios dispon√≠veis para o dia {{data}}."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:12807"},{"action":{"type":"SendMessage","settings":{"id":"4bc960e2-702b-434f-8a29-d7dcffda56b7","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"4bc960e2-702b-434f-8a29-d7dcffda56b7","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:13171"},{"action":{"type":"SendMessage","settings":{"id":"1da168d7-c2fa-4a8c-8851-b98cfa220dfa","type":"application/vnd.lime.select+json","content":{"text":"Gostaria de informar uma nova data?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"text":"N√£o","previewText":"N√£o","value":null,"index":1,"type":null}]}},"$cardContent":{"document":{"id":"1da168d7-c2fa-4a8c-8851-b98cfa220dfa","type":"application/vnd.lime.select+json","content":{"text":"Gostaria de informar uma nova data?","scope":"immediate","options":[{"text":"Sim","previewText":"Sim","value":null,"index":0,"type":null},{"text":"N√£o","previewText":"N√£o","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:13172"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"698b8d38-3dfa-4c7e-9634-f7ec72b709ce","type":"text/plain","textContent":"Entrada do usu√°rio","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:12490","$invalid":false}],"$conditionOutputs":[{"stateId":"6e5d5eec-19c6-4232-b227-1147ef23b231","$connId":"con_103","conditions":[{"source":"input","comparison":"equals","values":["Sim"],"$$hashKey":"object:14376"}],"$invalid":false,"$$hashKey":"object:14367"},{"stateId":"ad3b1851-9246-470c-a77e-952539f736f6","$connId":"con_108","conditions":[{"source":"input","comparison":"equals","values":["N√£o"],"$$hashKey":"object:14441"}],"$invalid":false,"$$hashKey":"object:14433"}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["Sim","N√£o"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"1b8121c2-4df2-40ff-bf78-7e74caa1524f","root":false,"$title":"6.2  üìÖ Sem hor√°rio","$position":{"top":"530px","left":"1482px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"f3fd011f-7775-427a-9c22-8036f088acbc":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"4a3909c6-9223-47c5-aeb0-31a20a491392","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:15469","$invalid":false}],"$conditionOutputs":[{"stateId":"1b8121c2-4df2-40ff-bf78-7e74caa1524f","$connId":"con_113","conditions":[{"source":"context","comparison":"equals","values":["false"],"$$hashKey":"object:20927","variable":"options"}],"$invalid":false,"$$hashKey":"object:20918"},{"stateId":"352346fe-f25c-4750-8c67-ce1ff31524ce","$connId":"con_118","conditions":[{"source":"context","comparison":"notEquals","values":["false"],"$$hashKey":"object:24514","variable":"options"}],"$invalid":false,"$$hashKey":"object:24506"}],"$enteringCustomActions":[{"type":"ExecuteScript","$title":"Gerar hor√°rios","$invalid":false,"settings":{"function":"run","source":"/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\nfunction run(listaDeHorarios, calendarId, timeOffset, open, close) {\n    var data = [];\n    data[8] = true;\n    data[9] = true;\n    data[10] = true;\n    data[11] = true;\n    data[12] = true;\n    data[13] = true;\n    data[14] = true;\n    data[15] = true;\n    data[16] = true;\n    data[17] = true;\n    data[18] = true;\n\n\n    var split = timeOffset.split(\"\");\n    var mathOperation = split[0];\n    var num = split[1] + split[2];\n    var closeHour = parseInt(close);\n    var openHour = parseInt(open);\n\n    var json = JSON.parse(listaDeHorarios);\n    if (json.calendars[calendarId].busy.length == 1) {\n        var init = new Date(json.calendars[calendarId].busy[0].start).getHours();\n        var final = new Date(json.calendars[calendarId].busy[0].end).getHours();\n        if (init == 8 && final == 19) {\n            return false;\n        }\n    }\n\n    json.calendars[calendarId].busy.forEach(function (element) {\n        var startHour = new Date(element.start).getHours();\n        var endHour = new Date(element.end).getHours();\n        startHour = eval(startHour + mathOperation + num);\n        endHour = eval(endHour + mathOperation + num);\n        for (var i = startHour; i < endHour; i++) {\n            if (data[i]) {\n                delete data[i];\n            }\n        }\n    });\n    var options = \"\";\n\n    data.forEach(function (available, hours) {\n        options += \"\\n\" + hours.toString() + \"h\";\n    });\n    if (options == \"\"){\n        return false;\n    }\n    return options;\n}","inputVariables":["listaDeHorarios","config.calendarId","config.timeOffset","config.openHour","config.closeHour"],"outputVariable":"options"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"f3fd011f-7775-427a-9c22-8036f088acbc","root":false,"$title":"6. üìÖ H√° hor√°rios?","$position":{"top":"420px","left":"1343px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"e9b02a2b-3ce3-4266-a9a1-72b14188902a":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"40323da9-46a9-4e5e-9b96-1298cda9548e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"40323da9-46a9-4e5e-9b96-1298cda9548e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:28657"},{"action":{"type":"SendMessage","settings":{"id":"63359224-6b13-4649-bf11-6cf051439b75","type":"text/plain","content":"Para finalizarmos: Qual o nome do seu {{especie}}?"},"$cardContent":{"document":{"id":"63359224-6b13-4649-bf11-6cf051439b75","type":"text/plain","content":"Para finalizarmos: Qual o nome do seu {{especie}}?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:28658"},{"input":{"bypass":false,"$cardContent":{"document":{"id":"7b732900-980a-4feb-9051-93db5f22f12b","type":"text/plain","textContent":"Entrada do usu√°rio","content":"nomeAnimal"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"nomeAnimal"},"$$hashKey":"object:28226","$invalid":false}],"$conditionOutputs":[{"stateId":"2f6719fa-f7ff-4c9c-ab26-abc19014254c","$connId":"con_123","conditions":[{"source":"input","comparison":"exists","values":[],"$$hashKey":"object:30177"}],"$invalid":false,"$$hashKey":"object:30168"}],"$enteringCustomActions":[{"type":"ExecuteScript","$title":"Executar script","$invalid":false,"settings":{"function":"run","source":"/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(horario) {\n                var horarioInt = parseInt(horario);\n                return (horarioInt + 1);\n            }","inputVariables":["horario"],"outputVariable":"horarioFinal"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"e9b02a2b-3ce3-4266-a9a1-72b14188902a","root":false,"$title":"7. üßë Pegar dados","$position":{"top":"669px","left":"1226px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"2f6719fa-f7ff-4c9c-ab26-abc19014254c":{"$contentActions":[{"action":{"type":"SendMessage","settings":{"id":"5e163aee-8a10-479f-a661-ac8435fd2245","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"5e163aee-8a10-479f-a661-ac8435fd2245","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:31437"},{"action":{"type":"SendMessage","settings":{"id":"a75f12e2-c9ac-4f02-adf0-98df14393921","type":"text/plain","content":"Confirma√ß√£o: \nData: {{data}}\nHor√°rio: {{horario}}\nNome: {{nomeAnimal}}\nEspecie: {{especie}}\nServi√ßo: {{servico}}"},"$cardContent":{"document":{"id":"a75f12e2-c9ac-4f02-adf0-98df14393921","type":"text/plain","content":"Confirma√ß√£o: \nData: {{data}}\nHor√°rio: {{horario}}\nNome: {{nomeAnimal}}\nEspecie: {{especie}}\nServi√ßo: {{servico}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false,"$$hashKey":"object:31438"},{"input":{"bypass":true,"$cardContent":{"document":{"id":"281c7e8c-e910-497b-b95d-91eb8abf335b","type":"text/plain","content":"Entrada do usu√°rio"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$$hashKey":"object:30257","$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"26f67df8-5b4a-4951-a6c5-e70d5e0063ca","$invalid":false},"$tags":[],"id":"2f6719fa-f7ff-4c9c-ab26-abc19014254c","root":false,"$title":"8. Confirmar","$position":{"top":"669px","left":"765px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}